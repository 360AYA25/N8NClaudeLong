# Claude Integration Guide

–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é n8n-claude-only –∫ Claude Code –∏ Claude Desktop.

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: Claude Desktop (macOS)

**–®–∞–≥ 1:** –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

```bash
cd /Users/sergey/N8NClaudeOnly
npm install
npm run build
```

**–®–∞–≥ 2:** –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Claude Desktop

```bash
nano ~/Library/Application\ Support/Claude/claude_desktop_config.json
```

**–®–∞–≥ 3:** –î–æ–±–∞–≤–∏—Ç—å MCP —Å–µ—Ä–≤–µ—Ä

```json
{
  "mcpServers": {
    "n8n-claude": {
      "command": "node",
      "args": ["/Users/sergey/N8NClaudeOnly/dist/mcp/index.js"],
      "env": {
        "MCP_MODE": "stdio",
        "DATABASE_PATH": "/Users/sergey/N8NClaudeOnly/data/nodes.db",
        "LOG_LEVEL": "info"
      }
    }
  }
}
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏!

**–®–∞–≥ 4:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Desktop

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ Claude Desktop –∑–∞–Ω–æ–≤–æ.

**–®–∞–≥ 5:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–í Claude Desktop –Ω–∞–ø–∏—à–∏—Ç–µ:

```
–ü–æ–∫–∞–∂–∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è n8n
```

–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è 11 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: search_nodes, get_node, validate_node –∏ –¥—Ä—É–≥–∏–µ.

### –í–∞—Ä–∏–∞–Ω—Ç 2: Claude Code (VS Code Extension)

**–®–∞–≥ 1:** –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç (–∫–∞–∫ –≤—ã—à–µ)

**–®–∞–≥ 2:** –û—Ç–∫—Ä—ã—Ç—å VS Code Settings

`Cmd+Shift+P` ‚Üí "Preferences: Open User Settings (JSON)"

**–®–∞–≥ 3:** –î–æ–±–∞–≤–∏—Ç—å MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```json
{
  "claude.mcpServers": {
    "n8n-claude": {
      "command": "node",
      "args": ["/Users/sergey/N8NClaudeOnly/dist/mcp/index.js"],
      "env": {
        "MCP_MODE": "stdio",
        "DATABASE_PATH": "/Users/sergey/N8NClaudeOnly/data/nodes.db"
      }
    }
  }
}
```

**–®–∞–≥ 4:** –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å VS Code

`Cmd+Shift+P` ‚Üí "Developer: Reload Window"

### –í–∞—Ä–∏–∞–Ω—Ç 3: –õ–æ–∫–∞–ª—å–Ω—ã–π .claude/mcp-config.json (–¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞)

–í —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å [.claude/mcp-config.json](.claude/mcp-config.json) —Å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏.

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —Ñ–∞–π–ª –∫–∞–∫ —à–∞–±–ª–æ–Ω –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ n8n API

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è workflow, –¥–æ–±–∞–≤—å—Ç–µ:

```json
{
  "mcpServers": {
    "n8n-claude": {
      "command": "node",
      "args": ["/Users/sergey/N8NClaudeOnly/dist/mcp/index.js"],
      "env": {
        "MCP_MODE": "stdio",
        "DATABASE_PATH": "/Users/sergey/N8NClaudeOnly/data/nodes.db",
        "N8N_API_URL": "http://localhost:5678",
        "N8N_API_KEY": "your-api-key-here",
        "LOG_LEVEL": "info"
      }
    }
  }
}
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å n8n API key:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ n8n ‚Üí Settings ‚Üí API
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API key
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
MCP_MODE=stdio           # –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (stdio –∏–ª–∏ http)
DATABASE_PATH=./data/nodes.db    # –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
N8N_API_URL=http://localhost:5678   # URL n8n –∏–Ω—Å—Ç–∞–Ω—Å–∞
N8N_API_KEY=xxx          # API –∫–ª—é—á –¥–ª—è n8n
LOG_LEVEL=info           # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (debug, info, warn, error)
PORT=3000                # –ü–æ—Ä—Ç –¥–ª—è HTTP —Ä–µ–∂–∏–º–∞
HOST=localhost           # –•–æ—Å—Ç –¥–ª—è HTTP —Ä–µ–∂–∏–º–∞
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –ü–æ–∏—Å–∫ –Ω–æ–¥

–í Claude –Ω–∞–ø–∏—à–∏—Ç–µ:

```
–ù–∞–π–¥–∏ –≤—Å–µ HTTP –Ω–æ–¥—ã –≤ n8n
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `search_nodes` –∏ –ø–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫ HTTP-related –Ω–æ–¥.

### –¢–µ—Å—Ç 2: –î–µ—Ç–∞–ª–∏ –Ω–æ–¥—ã

```
–ü–æ–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–¥–µ n8n-nodes-base.httpRequest
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_node` –∏ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ —Å–≤–æ–π—Å—Ç–≤–∞ –Ω–æ–¥—ã.

### –¢–µ—Å—Ç 3: –°–æ–∑–¥–∞–Ω–∏–µ workflow (—Ç—Ä–µ–±—É–µ—Ç n8n API)

```
–°–æ–∑–¥–∞–π –ø—Ä–æ—Å—Ç–æ–π workflow —Å webhook –∏ HTTP request
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `create_workflow` –∏ —Å–æ–∑–¥–∞—Å—Ç workflow –≤ –≤–∞—à–µ–º n8n.

## üêõ Troubleshooting

### MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Claude

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ `dist/mcp/index.js`
2. –ü—Ä–æ–µ–∫—Ç –Ω–µ —Å–æ–±—Ä–∞–Ω (`npm run build`)
3. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
4. Claude Desktop –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la /Users/sergey/N8NClaudeOnly/dist/mcp/index.js

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
cd /Users/sergey/N8NClaudeOnly
npm run build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å JSON
cat ~/Library/Application\ Support/Claude/claude_desktop_config.json | jq .

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Desktop
```

### –û—à–∏–±–∫–∞ "Database not found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
mkdir -p /Users/sergey/N8NClaudeOnly/data

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
cd /Users/sergey/N8NClaudeOnly
npm start
# Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
```

### –û—à–∏–±–∫–∞ "n8n API connection failed"

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. n8n –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
2. API URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. API key –≤–∞–ª–∏–¥–Ω—ã–π
4. n8n API –≤–∫–ª—é—á–µ–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ n8n
curl http://localhost:5678/healthz

# –¢–µ—Å—Ç —Å API key
curl -H "X-N8N-API-KEY: your-key" http://localhost:5678/api/v1/workflows
```

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–í–∫–ª—é—á–∏—Ç—å DEBUG –ª–æ–≥–∏:**

–í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```json
"env": {
  "LOG_LEVEL": "debug"
}
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (macOS):**

```bash
# Claude Desktop –ª–æ–≥–∏
tail -f ~/Library/Logs/Claude/mcp-*.log

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Console.app –∏ —Ñ–∏–ª—å—Ç—Ä—É–π—Ç–µ –ø–æ "Claude"
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–æ–¥

```
–ü–æ–∫–∞–∂–∏ –≤—Å–µ –Ω–æ–¥—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "Core Nodes"
```

Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `search_nodes` ‚Üí `get_node` –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–¥—ã

### –ü—Ä–∏–º–µ—Ä 2: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

```
–ü—Ä–æ–≤–µ—Ä—å, –≤–∞–ª–∏–¥–µ–Ω –ª–∏ —ç—Ç–æ—Ç workflow:
{
  "name": "Test",
  "nodes": [...],
  "connections": {...}
}
```

Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `validate_workflow`

### –ü—Ä–∏–º–µ—Ä 3: –°–æ–∑–¥–∞–Ω–∏–µ workflow –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è

```
–°–æ–∑–¥–∞–π workflow –∫–æ—Ç–æ—Ä—ã–π:
1. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç webhook –Ω–∞ /test
2. –î–µ–ª–∞–µ—Ç GET –∑–∞–ø—Ä–æ—Å –∫ https://api.github.com/users/sergey
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

Claude –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
1. `search_nodes` - –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–µ –Ω–æ–¥—ã
2. `get_node` - —É–∑–Ω–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. `validate_workflow` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º
4. `create_workflow` - —Å–æ–∑–¥–∞—Ç—å –≤ n8n

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –•—Ä–∞–Ω–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

**–ù–ï –∫–æ–º–º–∏—Ç—å—Ç–µ API –∫–ª—é—á–∏ –≤ git!**

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
1. Environment variables –≤ MCP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
2. –û—Ç–¥–µ–ª—å–Ω—ã–π `.env` —Ñ–∞–π–ª (–¥–æ–±–∞–≤–ª–µ–Ω –≤ .gitignore)
3. –°–∏—Å—Ç–µ–º–Ω—ã–µ keychain (macOS Keychain Access)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- API key —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ n8n dev –∏–Ω—Å—Ç–∞–Ω—Å–∞
- –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª—é—á —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è n8n API

## üöÄ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### HTTP —Ä–µ–∂–∏–º –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ HTTP —Ä–µ–∂–∏–º–µ
MCP_MODE=http npm start

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ –ª—é–±–æ–≥–æ –º–µ—Å—Ç–∞
curl -X POST http://localhost:3000/tools/search_nodes \
  -H "Content-Type: application/json" \
  -d '{"query": "http", "limit": 5}'
```

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è database

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
DATABASE_PATH=/path/to/custom.db npm start

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É —Å –Ω—É–ª—è
rm data/nodes.db
npm start  # –°–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é —Å seed –¥–∞–Ω–Ω—ã–º–∏
```

## üìù –†–µ–∑—é–º–µ

1. ‚úÖ –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç: `npm install && npm run build`
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤ Claude config —Å –ø–æ–ª–Ω—ã–º–∏ –ø—É—Ç—è–º–∏
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Desktop/VS Code
4. ‚úÖ (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ù–∞—Å—Ç—Ä–æ–∏—Ç—å n8n API
5. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã–º –∑–∞–ø—Ä–æ—Å–æ–º
6. ‚úÖ –ù–∞—á–∞—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å workflow!

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å Claude Code –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å n8n workflow –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏! üéâ
